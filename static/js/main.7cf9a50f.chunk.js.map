{"version":3,"sources":["api/api.js","assets/images/user.png","redux/dialogs-reducer.js","Components/Navbar/Navbar.module.css","assets/images/preloader.svg","Components/Common/FormsControls/FormsControls.js","Components/Header/Header.jsx","redux/auth-reducer.js","Components/Header/HeaderContainer.jsx","Components/Navbar/Navbar.jsx","Components/News/News.jsx","Components/Music/Music.jsx","Components/Settings/Settings.jsx","utils/objects-helpers.js","redux/users-reducer.js","Components/Common/Paginator/Paginator.jsx","Components/Users/User.jsx","Components/Users/Users.jsx","redux/users-selectors.js","Components/Users/UsersContainer.jsx","Components/Login/Login.jsx","redux/app-reducer.js","redux/sideBar-reducer.js","redux/redux-store.js","hoc/withSuspense.js","App.js","index.js","Components/Common/Preloader/Preloader.js","Components/Common/FormsControls/FormsControls.module.css","utils/validators/validators.js","Components/Common/Paginator/Paginator.module.css","Components/Users/Users.module.css","Components/Header/Header.module.css","redux/profile-reducer.js"],"names":["instance","axios","baseURL","withCredentials","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","follow","userId","post","unfollow","delete","getProfile","console","warn","profileApi","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","saveProfile","profile","authAPI","me","login","email","password","rememberMe","captcha","logout","securityAPI","getCaptchaUrl","module","exports","initialState","messages","id","message","dialogs","name","addMessageActionCreator","newMessageBody","type","dialogsReducer","state","action","text","FormControl","input","meta","touched","error","children","hasError","className","classes","formControl","Textarea","props","restProps","child","Input","createField","placeholder","validators","component","validate","Header","header","src","loginBlock","isAuth","onClick","to","captchaUrl","setAuthUserData","payload","getCaptchaUrlSuccess","getAuthUserData","dispatch","a","resultCode","url","authReducer","HeaderContainer","this","React","Component","connect","auth","Navbar","nav","item","activeClassName","active","News","Music","Settings","updateObjectInArray","items","itemId","objPropName","newObjProps","map","i","FOLLOW","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","toggleIsFetching","toggleFollowingInProgress","followUnfollowFlow","apiMethod","actionCreator","usersReducer","followed","filter","Paginator","totalItemsCount","onPageChange","portionSize","pagesCount","Math","ceil","pages","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","paginator","p","e","selectedPage","pageNumbers","User","user","photos","small","userPhoto","disabled","some","Users","u","key","getIsFetching","usersPage","createSelector","getPageSize","getTotalUsersCount","getCurrentPage","getFollowingInProgress","UsersContainer","pageNumber","setCurrentPage","requestUsers","Preloader","compose","bind","totalCount","LoginReduxForm","reduxForm","form","handleSubmit","onSubmit","required","formSummaryError","length","stopSubmit","_error","initialized","appReducer","friends","img","sideBarReducer","reducers","combineReducers","profilePage","profileReducer","dialogsPage","sideBar","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","__store__","withSuspense","fallback","DialogsContainer","lazy","ProfileContainer","App","initializeApp","path","render","AppContainer","withRouter","SamuraiJSApp","ReactDOM","document","getElementById","preloader","value","maxLengthCreator","maxLength","ADD_POST","posts","likesCount","addPostActionCreator","newPostBody","setStatusActionCreator","getUserProfileThunk","getStatusThunk","updateStatusThunk","file","getState","Promise","reject","newPost","postId"],"mappings":"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","file":"static/js/main.7cf9a50f.chunk.js","sourcesContent":["import * as axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    withCredentials: true,\r\n    headers: {\r\n        \"API-KEY\": \"b06971d9-611c-48a0-b181-a32de5e059d3\"\r\n    }\r\n});\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data);\r\n    },\r\n    follow(userId) {\r\n        return instance.post(`follow/${userId}`)\r\n            .then(response => response.data);\r\n    },\r\n    unfollow(userId) {\r\n        return instance.delete(`follow/${userId}`)\r\n            .then(response => response.data);\r\n    },\r\n    getProfile(userId) {\r\n        console.warn('obsolete method. Please use profileAPI object')\r\n        return profileApi.getProfile(userId);\r\n    }\r\n};\r\n\r\nexport const profileApi = {\r\n\r\n    getProfile(userId) {\r\n        return instance.get(`profile/${userId}`);\r\n    },\r\n    getStatus(userId) {\r\n        return instance.get(`profile/status/${userId}`);\r\n    },\r\n    updateStatus(status) {\r\n        return instance.put(`profile/status`, { status: status }); // can be just {status} instead {status: status}\r\n    },\r\n    savePhoto(photoFile) {\r\n        let formData = new FormData();\r\n        formData.append(\"image\", photoFile);\r\n        return instance.put(`profile/photo`, formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        });\r\n    },\r\n    saveProfile(profile) {\r\n        return instance.put(`profile`, profile);\r\n    }\r\n};\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get(`auth/me/`);\r\n    },\r\n    login(email, password, rememberMe = false, captcha = null) {\r\n        return instance.post(`auth/login/`, { email, password, rememberMe, captcha });\r\n    },\r\n    logout() {\r\n        return instance.delete(`auth/login/`);\r\n    }\r\n\r\n};\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get(`security/get-captcha-url`);\r\n    }\r\n};","module.exports = __webpack_public_path__ + \"static/media/user.129ab51c.png\";","const ADD_MESSAGE = 'dialogs/ADD-MESSAGE';\r\n\r\nlet initialState = {\r\n    messages: [\r\n        { id: 1, message: \"Hi, how are you ?\" },\r\n        { id: 2, message: \"What's up ?\" },\r\n        { id: 3, message: \"Hello world !\" },\r\n        { id: 4, message: \"My name is Costa\" },\r\n        { id: 5, message: \"Whaaaat!??\" },\r\n        { id: 6, message: \"Yo yo yo!!\" }\r\n    ],\r\n    dialogs: [\r\n        { id: 1, name: 'Costa' },\r\n        { id: 2, name: 'Darya' },\r\n        { id: 3, name: 'Yuli' },\r\n        { id: 4, name: 'Diana' },\r\n        { id: 5, name: 'Vasya' },\r\n        { id: 6, name: 'Petya' }\r\n    ]\r\n};\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case ADD_MESSAGE: \r\n            let text = action.newMessageBody;\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, {id: 6, message: text}]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const addMessageActionCreator = (newMessageBody) => ({\r\n    type: ADD_MESSAGE,\r\n    newMessageBody\r\n});\r\n\r\nexport default dialogsReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__2nrb7\",\"item\":\"Navbar_item__1ZthA\",\"active\":\"Navbar_active__xnuAk\",\"friendsBarContent\":\"Navbar_friendsBarContent__1dTfj\",\"friendsBar\":\"Navbar_friendsBar__2E-Jy\",\"friendsBarHeader\":\"Navbar_friendsBarHeader__35hjR\"};","module.exports = __webpack_public_path__ + \"static/media/preloader.49c8c1d4.svg\";","import React from 'react';\r\nimport classes from './FormsControls.module.css';\r\nimport { Field } from 'redux-form';\r\n\r\n\r\nconst FormControl = ({ input, meta: {touched, error}, children }) => {\r\n\r\n    const hasError = error && touched;\r\n\r\n    return (\r\n        <div className={classes.formControl + \" \" + (hasError ? classes.error : \"\")}>\r\n            <div>\r\n                {children}\r\n            </div>\r\n            {hasError && <span>{error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea = (props) => {\r\n    const {input, meta, child, ...restProps} = props;\r\n    return <FormControl {...props}><textarea {...input} {...restProps} /></FormControl>\r\n}\r\nexport const Input = (props) => {\r\n    const {input, meta, child, ...restProps} = props;\r\n    return <FormControl {...props}><input {...input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport const createField = (placeholder, name, validators, component, props=[], text=\"\") => (\r\n        <div>\r\n            <Field placeholder={placeholder}\r\n                name={name}\r\n                validate={validators}\r\n                component={component}\r\n                {...props}\r\n                />{text}\r\n        </div>\r\n)\r\n","import React, { useState } from 'react';\r\nimport classes from './Header.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Header = (props) => {\r\n\r\n  return (\r\n    <header className={classes.header}>\r\n      <img src=\"http://www.wpkixx.com/html/winku-dark/images/logo2.png\" />\r\n      <div className={classes.loginBlock}>\r\n        {props.isAuth\r\n          ? <div>Hello, {props.login} <button onClick={props.logout}>Logout</button></div>\r\n          : <NavLink to={'/login'}>Login</NavLink>}\r\n      </div>\r\n    </header>\r\n  );\r\n\r\n}\r\n\r\nexport default Header;","import {authAPI, securityAPI} from '../api/api';\r\nimport { stopSubmit } from 'redux-form';\r\nconst SET_USER_DATA = 'auth/SET-USER-DATA';\r\nconst GET_CAPTCHA_URL_SUCCESS = 'auth/GET-CAPTCHA-URL-SUCCESS';\r\n\r\nlet initialState = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth:false,\r\n    captchaUrl: null // if null then captcha is not required\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n//action creator\r\nexport const setAuthUserData = (id, email, login, isAuth) => ({\r\n  type: SET_USER_DATA,\r\n  payload: { id, email, login, isAuth }\r\n});\r\nexport const getCaptchaUrlSuccess = (captchaUrl) => ({\r\n  type: GET_CAPTCHA_URL_SUCCESS,\r\n  payload: { captchaUrl }\r\n});\r\n\r\n//thunks\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n\r\n  let response = await authAPI.me()\r\n  if (response.data.resultCode === 0) {\r\n    let { id, email, login } = response.data.data;\r\n    dispatch(setAuthUserData(id, email, login, true));\r\n  }\r\n};\r\n\r\nexport const login = (email, password, rememberMe, captcha) => async (dispatch) => {\r\n\r\n  let response = await authAPI.login(email, password, rememberMe, captcha);\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(getAuthUserData());\r\n  } else {\r\n    if (response.data.resultCode === 10) {\r\n      dispatch(getCaptchaUrl());\r\n    }\r\n\r\n    let message = response.data.messages.length > 0 ? response.data.messages[0] : \"Some error\";\r\n    dispatch(stopSubmit('login', { _error: message }));\r\n  }\r\n};\r\n\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n\r\n  let response = await securityAPI.getCaptchaUrl();\r\n  const captchaUrl = response.data.url;\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl));\r\n};\r\n\r\nexport const logout = () => async (dispatch) => {\r\n\r\n  let response = await authAPI.logout()\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(setAuthUserData(null, null, null, false));\r\n  }\r\n};\r\n\r\nexport default authReducer;","import React from 'react';\r\nimport Header from './Header';\r\nimport { connect } from 'react-redux';\r\nimport { logout } from '../../redux/auth-reducer';\r\n\r\n\r\nclass HeaderContainer extends React.Component {\r\n\r\n  render() {\r\n    return <Header {...this.props} />\r\n  }\r\n}\r\nconst mapStateToProps = (state) => ({\r\n  isAuth: state.auth.isAuth,\r\n  login: state.auth.login\r\n});\r\n\r\nexport default connect(mapStateToProps, { logout })(HeaderContainer);","\r\nimport React from 'react';\r\nimport classes from './Navbar.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\nimport FriendsBar from './FriendsBar/FriendsBar';\r\n\r\nconst Navbar = () => {\r\n\r\n// let friendsElements =\r\n//     store.state.sideBar.friends.map( f => <FriendsBar name={f.name} id={f.id} img={f.img} /> );\r\n\r\n  return (\r\n      <nav className={classes.nav}>\r\n        <div className={classes.item}>\r\n          <NavLink to=\"/profile\" activeClassName={classes.active}>Profile</NavLink>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <NavLink to=\"/dialogs\" activeClassName={classes.active}>Messages</NavLink>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <NavLink to=\"/news\" activeClassName={classes.active}>News</NavLink>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <NavLink to=\"/music\" activeClassName={classes.active}>Music</NavLink>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <NavLink to=\"/settings\" activeClassName={classes.active}>Settings</NavLink>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <NavLink to=\"/users\" activeClassName={classes.active}>Users</NavLink>\r\n        </div>\r\n        {/* <div className={classes.friendsBarHeader}>\r\n          <h3>My Friends</h3>\r\n        </div>\r\n          <div className={classes.friendsBarContent}>\r\n            {friendsElements}\r\n          </div> */}\r\n      </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;","import React from 'react';\r\nimport classes from './News.module.css';\r\n\r\nconst News = (props) => {\r\n    return (\r\n        <div>\r\n            News\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default News;","import React from 'react';\r\nimport classes from './Music.module.css';\r\n\r\nconst Music = (props) => {\r\n    return (\r\n        <div>\r\n            Music\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Music;","import React from 'react';\r\nimport classes from './Settings.module.css';\r\n\r\nconst Settings = (props) => {\r\n    return (\r\n        <div>\r\n            Settings\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Settings;","\r\nexport const updateObjectInArray = (items, itemId, objPropName, newObjProps) => {\r\n    return items.map( (i) => {\r\n        if( i[objPropName] === itemId ) {\r\n            return {...i, ...newObjProps}\r\n        }\r\n        return i;\r\n    })\r\n}\r\n\r\n","import {usersAPI} from '../api/api';\r\nimport {updateObjectInArray} from '.././utils/objects-helpers';\r\n\r\nconst FOLLOW = 'users/FOLLOW';\r\nconst UNFOLLOW = 'users/UNFOLLOW';\r\nconst SET_USERS = 'users/SET-USERS';\r\nconst SET_CURRENT_PAGE = 'users/SET-CURRENT-PAGE';\r\nconst SET_TOTAL_USERS_COUNT = 'users/SET-TOTAL-USERS-COUNT';\r\nconst TOGGLE_IS_FETCHING = 'users/TOGGLE-IS-FETCHING';\r\nconst TOGGLE_FOLLOWING_IN_PROGRESS = 'users/TOGGLE-FOLLOWING-IN-PROGRESS';\r\n\r\nlet initialState = {\r\n    users: [],\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: []\r\n};\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, \"id\", {followed: true})\r\n            };\r\n\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, \"id\", {followed: false})\r\n                // Refactoring in utils/object-helpers.js\r\n                \r\n                // users: state.users.map( (user) => {\r\n                //     if( user.id === action.userId ) {\r\n                //         return {...user, followed: false};\r\n                //     }\r\n                //     return user;\r\n                // })\r\n            };\r\n        case SET_USERS: {\r\n            return { ...state, users: action.users };\r\n        }\r\n        case SET_CURRENT_PAGE: {\r\n            return { ...state, currentPage: action.currentPage };\r\n        }\r\n        case SET_TOTAL_USERS_COUNT: {\r\n            return { ...state, totalUsersCount: action.totalUsersCount };\r\n        }\r\n        case TOGGLE_IS_FETCHING: {\r\n            return { ...state, isFetching: action.isFetching };\r\n        }\r\n        case TOGGLE_FOLLOWING_IN_PROGRESS: {\r\n            return { ...state,\r\n                        followingInProgress: action.isFetching \r\n                        ? [...state.followingInProgress, action.userId]\r\n                        : state.followingInProgress.filter(id => id !== action.userId)\r\n                    };\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n// Action creators\r\n\r\nexport const followSuccess = (userId) => ( {type: FOLLOW, userId} );\r\nexport const unfollowSuccess = (userId) => ( {type: UNFOLLOW, userId} );\r\nexport const setUsers = (users) => ( {type: SET_USERS, users} );\r\nexport const setCurrentPage = (currentPage) => ( {type: SET_CURRENT_PAGE, currentPage});\r\nexport const setTotalUsersCount = (totalUsersCount) => ( {type: SET_TOTAL_USERS_COUNT, totalUsersCount});\r\nexport const toggleIsFetching = (isFetching) => ( {type: TOGGLE_IS_FETCHING, isFetching});\r\nexport const toggleFollowingInProgress = (isFetching, userId) => ( {type: TOGGLE_FOLLOWING_IN_PROGRESS, isFetching, userId});\r\n\r\n// Thunks\r\n\r\nexport const requestUsers = (currentPage, pageSize) => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleIsFetching(true));\r\n\r\n        let data = await usersAPI.getUsers(currentPage, pageSize);\r\n        dispatch(toggleIsFetching(false));\r\n        dispatch(setUsers(data.items));\r\n        dispatch(setTotalUsersCount(data.totalCount));\r\n    };\r\n};\r\n\r\n// Avoiding code dublication\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n\r\n    dispatch(toggleFollowingInProgress(true, userId)); //button disabled\r\n\r\n    let data = await apiMethod(userId);\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(actionCreator(userId));\r\n    }\r\n    dispatch(toggleFollowingInProgress(false, userId)); // button enabled\r\n};\r\n\r\nexport const follow = (userId) => {\r\n    return async (dispatch) => {\r\n        let apiMethod = usersAPI.follow.bind(usersAPI);\r\n        let actionCreator = followSuccess;\r\n        followUnfollowFlow(dispatch, userId, apiMethod, actionCreator);\r\n    };\r\n};\r\n\r\nexport const unfollow = (userId) => {\r\n    return async (dispatch) => {\r\n        let apiMethod = usersAPI.unfollow.bind(usersAPI);\r\n        let actionCreator = unfollowSuccess;\r\n        followUnfollowFlow(dispatch, userId, apiMethod, actionCreator);\r\n    };\r\n};\r\n\r\nexport default usersReducer;","import React, { useState } from 'react';\r\nimport classes from './Paginator.module.css';\r\n\r\nexport const Paginator = ({ totalItemsCount, pageSize, currentPage, onPageChange, portionSize=10 }) => {\r\n\r\n    let pagesCount = Math.ceil(totalItemsCount / pageSize);\r\n    let pages = [];\r\n\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i);\r\n    }\r\n\r\n\r\n    let portionCount = Math.ceil(pagesCount / portionSize);\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    let rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n    return (\r\n        <div className={classes.paginator}>\r\n            { portionNumber > 1 &&\r\n            <button onClick={ () => {setPortionNumber(portionNumber - 1) }}>Prev</button>}\r\n        \r\n            {pages\r\n            .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n            .map(p => { \r\n                    return <span onClick={(e) => {\r\n                        onPageChange(p)\r\n                    }}\r\n                        className={currentPage === p ? classes.selectedPage : classes.pageNumbers}>\r\n                        {p + \" \"}\r\n                    </span>\r\n                \r\n            })}\r\n            { portionCount > portionNumber &&\r\n            <button onClick={ () => {setPortionNumber(portionNumber + 1) }}>Next</button>}\r\n        </div>\r\n    )\r\n};","import React from 'react';\r\nimport classes from './Users.module.css';\r\nimport userPhoto from '../../assets/images/user.png';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nlet User = ({ user, followingInProgress, follow, unfollow }) => {\r\n    return (\r\n        <div>\r\n            <span>\r\n                <NavLink to={'/profile/' + user.id} className={classes.user}>\r\n                    <img src={user.photos.small != null ? user.photos.small : userPhoto} />\r\n                </NavLink>\r\n                <div>\r\n                    {user.followed\r\n                        ? <button disabled={followingInProgress.some(id => id === user.id)} onClick={() => {\r\n                            unfollow(user.id)\r\n                        }}>Unfollow</button>\r\n                        : <button disabled={followingInProgress.some(id => id === user.id)} onClick={() => {\r\n                            follow(user.id)\r\n                        }}>Follow</button>\r\n                    }\r\n                </div>\r\n            </span>\r\n            <span>\r\n                <div>{user.name}</div>\r\n            </span>\r\n        </div >\r\n\r\n    )\r\n}\r\n\r\nexport default User;","import React from 'react';\r\nimport classes from './Users.module.css';\r\nimport { Paginator } from '../Common/Paginator/Paginator';\r\nimport User from './User';\r\n\r\nlet Users = ({ currentPage, onPageChange, totalUsersCount, pageSize, users, ...props }) => {\r\n\r\n    return (\r\n        <div>\r\n            <Paginator currentPage={currentPage}\r\n                onPageChange={onPageChange}\r\n                totalItemsCount={totalUsersCount}\r\n                pageSize={pageSize} />\r\n            <div>\r\n                {\r\n                    users.map((u) => <User user={u}\r\n                        followingInProgress={props.followingInProgress}\r\n                        key={u.id}\r\n                        unfollow={props.unfollow}\r\n                        follow={props.follow} />\r\n                    )\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users;","// MSTP постоянно запускается с каждым изменением STATE!!!\r\n\r\nimport { createSelector } from \"reselect\";\r\n\r\nexport const getUsersSelector = (state) => {\r\n    return state.usersPage.users; \r\n};\r\n\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching;\r\n};\r\n\r\nexport const getUsers = createSelector(getUsersSelector, (users) => {\r\n    return users.filter(u => true);\r\n});\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize;\r\n};\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount;\r\n};\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage;\r\n};\r\n\r\n\r\n\r\nexport const getFollowingInProgress = (state) => {\r\n    return state.usersPage.followingInProgress;\r\n};","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { follow, requestUsers, setCurrentPage, toggleFollowingInProgress, unfollow } from '../../redux/users-reducer';\r\nimport Preloader from '../Common/Preloader/Preloader';\r\nimport Users from './Users';\r\nimport { getUsers, getPageSize, getTotalUsersCount, getCurrentPage, getIsFetching, getFollowingInProgress} from '../../redux/users-selectors';\r\n\r\nclass UsersContainer extends React.Component {\r\n\r\n    componentDidMount() {\r\n        let {currentPage, pageSize} = this.props;\r\n        this.props.requestUsers(currentPage, pageSize);\r\n        \r\n    }\r\n\r\n    onPageChange = (pageNumber) => {\r\n        let {pageSize} = this.props;\r\n        this.props.setCurrentPage(pageNumber);\r\n        this.props.requestUsers(pageNumber, pageSize);\r\n    }\r\n    \r\n    render() {\r\n\r\n        return <>\r\n            {this.props.isFetching ? <Preloader /> : null}\r\n            <Users totalUsersCount={this.props.totalUsersCount}\r\n                pageSize={this.props.pageSize}\r\n                currentPage={this.props.currentPage}\r\n                onPageChange={this.onPageChange}\r\n                users={this.props.users}\r\n                follow={this.props.follow}\r\n                unfollow={this.props.unfollow}\r\n                followingInProgress={this.props.followingInProgress}\r\n            />\r\n        </>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    };\r\n};\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, { follow, unfollow, setCurrentPage, toggleFollowingInProgress, requestUsers })\r\n) (UsersContainer)","import React from 'react';\r\nimport classes from '../Common/FormsControls/FormsControls.module.css';\r\nimport { reduxForm } from 'redux-form';\r\nimport { Input, createField } from '../Common/FormsControls/FormsControls';\r\nimport { required } from '../../utils/validators/validators';\r\nimport { connect } from 'react-redux';\r\nimport { login } from '../../redux/auth-reducer';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nconst LoginForm = ({handleSubmit, error, captchaUrl}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            {createField(\"E-mail\", \"email\", [required], Input)}\r\n            {createField(\"Password\", \"password\", [required], Input, { type: \"password\" })}\r\n            {createField(null, \"rememberMe\", [], Input, { type: \"checkbox\" }, \"Remember Me\")}\r\n            \r\n            { captchaUrl && <img src={captchaUrl} />}\r\n            { captchaUrl &&  createField(\"Symbols from image\", \"captcha\", [required], Input) }\r\n            \r\n\r\n            {\r\n            error && \r\n            <div className={classes.formSummaryError}>\r\n                {error}\r\n            </div>\r\n            }\r\n\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({ form: 'login' })(LoginForm) // <----handleSubmit in props\r\n\r\nconst Login = (props) => {\r\n    const onSubmit = (formData) => {\r\n        props.login(formData.email, formData.password, formData.rememberMe, formData.captcha);\r\n    }\r\n\r\n    if (props.isAuth) {\r\n        return <Redirect to={\"/profile\"} />\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Login Page</h1>\r\n            <LoginReduxForm captchaUrl={props.captchaUrl} onSubmit={onSubmit} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isAuth: state.auth.isAuth,\r\n    captchaUrl: state.auth.captchaUrl\r\n})\r\n\r\nexport default connect(mapStateToProps, { login })(Login);","import { getAuthUserData } from './auth-reducer';\r\n\r\nconst INITIALIZED_SUCCESS = 'app/INITIALIZED-SUCCESS';\r\nlet initialState = {\r\n    initialized: false\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const initializedSuccess = () => ({ type: INITIALIZED_SUCCESS });\r\n\r\nexport const initializeApp = () => (dispatch) => {\r\n  let promise = dispatch(getAuthUserData());\r\n  promise.then( () => {\r\n    dispatch(initializedSuccess())\r\n  });\r\n};\r\n\r\nexport default appReducer;","let initialState = {\r\n    friends: [\r\n        { id: 100, name: 'Darya', img: 'https://www.kindpng.com/picc/b/163/1636340.png' },\r\n        { id: 200, name: 'Diana', img: 'https://www.kindpng.com/picc/b/163/1636340.png' },\r\n        { id: 300, name: 'Yuli', img: 'https://www.kindpng.com/picc/b/163/1636340.png' }\r\n    ]\r\n};\r\n\r\nconst sideBarReducer = (state = initialState, action) => {\r\n    \r\n    return state;\r\n};\r\n\r\nexport default sideBarReducer;","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport sideBarReducer from \"./sideBar-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport appReducer from \"./app-reducer\";\r\n\r\n\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    sideBar: sideBarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n});\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\n// let store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\nwindow.__store__ = store;\r\nexport default store;","import React, { Suspense } from 'react';\r\nimport Preloader from '../Components/Common/Preloader/Preloader';\r\n\r\n\r\n\r\nexport const withSuspense = (Component) => {\r\n    return (props) => {\r\n            return <Suspense fallback={<div><Preloader /></div>}>\r\n              <Component {...props} />\r\n            </Suspense>\r\n          }\r\n    };","import React, { Suspense } from 'react';\nimport './App.css';\nimport HeaderContainer from './Components/Header/HeaderContainer';\nimport Navbar from './Components/Navbar/Navbar';\nimport News from './Components/News/News';\nimport Music from './Components/Music/Music';\nimport Settings from './Components/Settings/Settings';\nimport { Route, withRouter, HashRouter } from 'react-router-dom';\nimport UsersContainer from './Components/Users/UsersContainer';\nimport Login from './Components/Login/Login';\nimport { initializeApp } from './redux/app-reducer';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport Preloader from './Components/Common/Preloader/Preloader';\nimport store from './redux/redux-store';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { withSuspense } from './hoc/withSuspense';\n// import DialogsContainer from './Components/Dialogs/DialogsContainer';\n// import ProfileContainer from './Components/Profile/ProfileContainer';\nconst DialogsContainer = React.lazy(() => import('./Components/Dialogs/DialogsContainer'));\nconst ProfileContainer = React.lazy(() => import('./Components/Profile/ProfileContainer'));\n\n\nclass App extends React.Component {\n  componentDidMount() {\n    this.props.initializeApp();\n  }\n  render() {\n    if (!this.props.initialized) {\n      return <Preloader />\n    }\n    return (\n      <div className='app-wrapper'>\n        <HeaderContainer />\n        <Navbar />\n\n        <div className='app-wrapper-content'>\n\n          <Route path='/profile/:userId?' render={withSuspense(ProfileContainer)} />\n          <Route path='/dialogs' render={withSuspense(DialogsContainer)} />\n          \n          <Route path='/users' render={() => <UsersContainer />} />\n\n          <Route path='/news' render={() => <News />} />\n\n          <Route path='/music' render={() => <Music />} />\n\n          <Route path='/settings' render={() => <Settings />} />\n\n          <Route path='/login' render={() => <Login />} />\n\n        </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => ({\n\n  initialized: state.app.initialized\n\n})\nconst AppContainer = compose(\n  withRouter,\n  connect(mapStateToProps, { initializeApp }))(App);\n\nconst SamuraiJSApp = (props) => {\n  return (\n    <HashRouter>\n      <Provider store={store}>\n        <AppContainer />\n      </Provider>\n    </HashRouter>\n  )\n}\n\nexport default SamuraiJSApp;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport SamuraiJSApp from './App';\nimport './index.css';\n\nReactDOM.render(<SamuraiJSApp />,document.getElementById('root'));\n\n\n","import React from 'react';\r\nimport preloader from '../../../assets/images/preloader.svg';\r\n\r\nconst Preloader = (props) => {\r\n    return <div><img src={preloader} /></div>\r\n}\r\n\r\nexport default Preloader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__2AxtE\",\"error\":\"FormsControls_error__2cKMa\",\"formSummaryError\":\"FormsControls_formSummaryError__1BPXs\"};","export const required = value => {\r\n    if (value) return undefined;\r\n\r\n    return 'Field is required';\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n    if (value.length > maxLength) return `Max Length is ${maxLength} symbols`;\r\n    return undefined;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedPage\":\"Paginator_selectedPage__3Eh0r\",\"pageNumbers\":\"Paginator_pageNumbers__Hj5z-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"Users_user__3H5ez\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1BfEJ\",\"loginBlock\":\"Header_loginBlock__DRZ9P\"};","import { usersAPI, profileApi } from '../api/api';\r\nimport { stopSubmit } from 'redux-form';\r\n\r\nconst ADD_POST = 'profile/ADD-POST';\r\nconst SET_USER_PROFILE = 'profile/SET-USER-PROFILE';\r\nconst SET_STATUS = 'profile/SET-STATUS';\r\nconst DELETE_POST = 'profile/DELETE-POST';\r\nconst SAVE_PHOTO_SUCCESS = 'profile/SAVE-PHOTO-SUCCESS';\r\n\r\n\r\nlet initialState = {\r\n    posts: [\r\n        { id: 1, message: \"Hi, how are you?\", likesCount: '15' },\r\n        { id: 2, message: \"It is my first post\", likesCount: '20' },\r\n        { id: 3, message: \"Hi?\", likesCount: '0' },\r\n        { id: 4, message: \"yo yo yo\", likesCount: '12' }\r\n    ],\r\n    profile: null,\r\n    status: \"\"\r\n\r\n};\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case ADD_POST:\r\n            let newPost = {\r\n                id: 5,\r\n                message: action.newPostBody,\r\n                likesCount: 0\r\n            }\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost]\r\n            };\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            };\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            };\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(p => p.id != action.postId)\r\n            };\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return {\r\n                ...state,\r\n                profile: { ...state.profile, photos: action.photos }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n//action creators\r\nexport const addPostActionCreator = (newPostBody) => ({\r\n    type: ADD_POST,\r\n    newPostBody\r\n});\r\n\r\nexport const setUserProfileActionCreator = (profile) => ({\r\n    type: SET_USER_PROFILE,\r\n    profile\r\n});\r\n\r\nexport const setStatusActionCreator = (status) => ({\r\n    type: SET_STATUS,\r\n    status\r\n});\r\n\r\nexport const savePhotoSuccess = (photos) => ({\r\n    type: SAVE_PHOTO_SUCCESS,\r\n    photos\r\n});\r\n\r\n\r\nexport const deletePostActionCreator = (postId) => ({\r\n    type: DELETE_POST,\r\n    postId\r\n});\r\n\r\n// Thunks\r\n\r\nexport const getUserProfileThunk = (userId) => async (dispatch) => {\r\n\r\n    const response = await usersAPI.getProfile(userId)\r\n    dispatch(setUserProfileActionCreator(response.data));\r\n};\r\n\r\nexport const getStatusThunk = (userId) => async (dispatch) => {\r\n\r\n    const response = await profileApi.getStatus(userId)\r\n    dispatch(setStatusActionCreator(response.data));\r\n};\r\n\r\nexport const updateStatusThunk = (status) => async (dispatch) => {\r\n\r\n    const response = await profileApi.updateStatus(status)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setStatusActionCreator(status));\r\n    }\r\n};\r\n\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n\r\n    const response = await profileApi.savePhoto(file);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.data.photos));\r\n    }\r\n};\r\n\r\nexport const saveProfile = (profile) => async (dispatch, getState) => {\r\n\r\n    const userId = getState().auth.id;\r\n    const response = await profileApi.saveProfile(profile);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getUserProfileThunk(userId));\r\n    } else {\r\n        dispatch(stopSubmit('edit-profile', { _error: response.data.messages[0] }));\r\n        return Promise.reject(response.data.messages[0]);\r\n    }\r\n};\r\nexport default profileReducer;"],"sourceRoot":""}